var Game = new World();
var GameInterface = new Interface();
var PlayList = []
PlayList.push(new Song("RedLikeRoses.mp3"));
function SetupRedLikeRoses(){
	PlayList[0].setSpeed(5);
	PlayList[0].setMaxProgress(950);
	PlayList[0].addWave(3,1,0,0,0);
	PlayList[0].addWave(20,0,1,0,0);
	PlayList[0].addWave(37,0,0,1,0);
	PlayList[0].addWave(54,0,0,0,1);
	PlayList[0].addWave(63,0,0,1,0);
	PlayList[0].addWave(65,1,0,0,0);
	PlayList[0].addWave(67,0,0,0,1);
	PlayList[0].addWave(69,0,1,0,0);
	PlayList[0].addWave(71,0,0,1,0);
	PlayList[0].addWave(73,1,0,0,0);
	PlayList[0].addWave(75,0,0,0,1);
	PlayList[0].addWave(78,0,1,0,0);
	PlayList[0].addWave(80,0,0,1,0);
	PlayList[0].addWave(82,1,0,0,0);
	PlayList[0].addWave(84,0,0,0,1);
	PlayList[0].addWave(86,0,1,0,0);
	PlayList[0].addWave(88,0,0,1,0);
	PlayList[0].addWave(90,1,0,0,0);
	PlayList[0].addWave(92,0,0,0,1);
	PlayList[0].addWave(94,0,1,0,0);
	PlayList[0].addWave(96,0,0,1,0);
	PlayList[0].addWave(99,1,0,0,0);
	PlayList[0].addWave(101,0,0,0,1);
	PlayList[0].addWave(103,0,1,0,0);
	PlayList[0].addWave(105,0,0,1,0);
	PlayList[0].addWave(114,1,0,0,1); 
	PlayList[0].addWave(122,0,1,1,0); 
	PlayList[0].addWave(131,1,0,0,0);
	PlayList[0].addWave(139,0,1,0,0);
	PlayList[0].addWave(148,0,0,0,1);
	PlayList[0].addWave(156,0,0,1,0);
	PlayList[0].addWave(165,1,0,0,0);
	PlayList[0].addWave(173,0,1,0,0);
	PlayList[0].addWave(182,0,0,0,1);
	PlayList[0].addWave(191,0,0,1,0);
	PlayList[0].addWave(200,1,0,0,0);
	PlayList[0].addWave(202,0,0,1,0);
	PlayList[0].addWave(204,0,0,0,1);
	PlayList[0].addWave(206,0,1,0,0);
	PlayList[0].addWave(208,1,0,0,0);
	PlayList[0].addWave(211,0,0,1,0);
	PlayList[0].addWave(213,0,0,0,1);
	PlayList[0].addWave(215,0,1,0,0);
	PlayList[0].addWave(217,1,0,0,0);
	PlayList[0].addWave(219,0,0,1,0);
	PlayList[0].addWave(221,0,0,0,1);
	PlayList[0].addWave(223,0,1,0,0);
	PlayList[0].addWave(225,1,0,0,0);
	PlayList[0].addWave(227,0,0,1,0);
	PlayList[0].addWave(230,0,0,0,1);
	PlayList[0].addWave(232,0,1,0,0);
	PlayList[0].addWave(234,1,0,0,0);
	PlayList[0].addWave(236,0,0,1,0);
	PlayList[0].addWave(238,0,0,0,1);
	PlayList[0].addWave(240,0,1,0,0);
	PlayList[0].addWave(242,1,0,0,0);
	PlayList[0].addWave(244,0,0,1,0);
	PlayList[0].addWave(247,0,0,0,1);
	PlayList[0].addWave(249,0,1,0,0);
	PlayList[0].addWave(251,1,0,0,0);
	PlayList[0].addWave(253,0,0,1,0);
	PlayList[0].addWave(255,0,0,0,1);
	PlayList[0].addWave(257,0,1,0,0);
	PlayList[0].addWave(260,1,0,0,0);
	PlayList[0].addWave(262,0,0,1,0);
	PlayList[0].addWave(264,0,0,0,1);
	PlayList[0].addWave(264,0,1,0,0);
	PlayList[0].addWave(268,1,1,0,0);
	PlayList[0].addWave(277,0,0,1,1);
	PlayList[0].addWave(285,1,0,1,0);
	PlayList[0].addWave(294,0,1,0,1);
	PlayList[0].addWave(303,1,0,0,1);
	PlayList[0].addWave(311,0,1,1,0);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(320,0,1,1,1);
	PlayList[0].addWave(337,1,0,0,0);
	PlayList[0].addWave(338,1,0,0,0);
	PlayList[0].addWave(339,1,0,0,0);
	PlayList[0].addWave(340,1,0,0,0);
	PlayList[0].addWave(341,1,0,0,0);
	PlayList[0].addWave(342,1,0,0,0);
	PlayList[0].addWave(343,1,0,0,0);
	PlayList[0].addWave(344,1,0,0,0);
	PlayList[0].addWave(345,1,0,0,0);
	PlayList[0].addWave(346,1,0,0,0);
	PlayList[0].addWave(347,1,0,0,0);
	PlayList[0].addWave(348,1,0,0,0);
	PlayList[0].addWave(349,1,0,0,0);
	PlayList[0].addWave(350,1,0,0,0);
	PlayList[0].addWave(351,1,0,0,0);
	PlayList[0].addWave(352,1,0,0,0);
	PlayList[0].addWave(353,1,0,0,0);
	PlayList[0].addWave(354,1,0,0,0);
	PlayList[0].addWave(355,1,0,0,0);
	PlayList[0].addWave(356,1,0,0,0);
	PlayList[0].addWave(357,1,0,0,0);
	PlayList[0].addWave(358,1,0,0,0);
	PlayList[0].addWave(359,1,0,0,0);
	PlayList[0].addWave(360,1,0,0,0);
	PlayList[0].addWave(361,1,0,0,0);
	PlayList[0].addWave(362,1,0,0,0);
	PlayList[0].addWave(363,1,0,0,0);
	PlayList[0].addWave(364,1,0,0,0);
	PlayList[0].addWave(365,1,0,0,0);
	PlayList[0].addWave(368,0,0,0,1);
	PlayList[0].addWave(370,0,0,1,0);
	PlayList[0].addWave(372,1,0,0,0);
	PlayList[0].addWave(373,0,1,0,0);
	PlayList[0].addWave(376,1,0,0,0);
	PlayList[0].addWave(379,0,1,0,0);
	PlayList[0].addWave(381,0,0,0,1);
	PlayList[0].addWave(382,0,0,1,0);
	PlayList[0].addWave(386,0,0,0,1);
	PlayList[0].addWave(388,0,0,1,0);
	PlayList[0].addWave(390,1,0,0,0);
	PlayList[0].addWave(391,0,1,0,0);
	PlayList[0].addWave(395,1,0,0,0);
	PlayList[0].addWave(397,0,1,0,0);
	PlayList[0].addWave(399,0,0,0,1);
	PlayList[0].addWave(400,0,0,1,0);
	PlayList[0].addWave(404,0,0,0,1);
	PlayList[0].addWave(406,0,0,1,0);
	PlayList[0].addWave(408,1,0,0,0);  
	PlayList[0].addWave(408,0,1,0,0);
	PlayList[0].addWave(412,1,0,0,0);
	PlayList[0].addWave(415,0,1,0,0);
	PlayList[0].addWave(417,0,0,0,1);
	PlayList[0].addWave(418,0,0,1,0);
	PlayList[0].addWave(422,0,0,0,1);
	PlayList[0].addWave(424,0,0,1,0);
	PlayList[0].addWave(426,1,0,0,0);
	PlayList[0].addWave(427,0,1,0,0);
	PlayList[0].addWave(431,1,0,0,0);
	PlayList[0].addWave(433,0,1,0,0);
	PlayList[0].addWave(435,0,0,0,1);
	PlayList[0].addWave(436,0,0,1,0);
	PlayList[0].addWave(439,0,0,0,1);
	PlayList[0].addWave(442,0,0,1,0);
	PlayList[0].addWave(444,1,0,0,0);
	PlayList[0].addWave(445,0,1,0,0);
	PlayList[0].addWave(449,0,0,0,1);
	PlayList[0].addWave(451,0,0,1,0);
	PlayList[0].addWave(453,1,0,0,0);
	PlayList[0].addWave(454,0,1,0,0);
	PlayList[0].addWave(458,1,0,0,0);
	PlayList[0].addWave(460,0,1,0,0);
	PlayList[0].addWave(462,0,0,0,1);
	PlayList[0].addWave(463,0,0,1,0);
	PlayList[0].addWave(467,0,0,0,1);
	PlayList[0].addWave(469,0,0,1,0);
	PlayList[0].addWave(471,1,0,0,0);
	PlayList[0].addWave(472,0,1,0,0);
	PlayList[0].addWave(477,1,0,0,0);
	PlayList[0].addWave(478,0,1,0,0);
	PlayList[0].addWave(479,0,0,1,0);
	PlayList[0].addWave(481,0,0,0,1);
	PlayList[0].addWave(486,0,0,0,1);
	PlayList[0].addWave(487,0,0,1,0);
	PlayList[0].addWave(488,0,1,0,0);
	PlayList[0].addWave(490,1,0,0,0);
	PlayList[0].addWave(495,1,0,0,0);
	PlayList[0].addWave(496,0,1,0,0);
	PlayList[0].addWave(497,0,0,1,0);
	PlayList[0].addWave(499,0,0,0,1);
	PlayList[0].addWave(504,0,0,0,1);
	PlayList[0].addWave(505,0,0,1,0);
	PlayList[0].addWave(506,0,1,0,0);
	PlayList[0].addWave(508,1,0,0,0);
	PlayList[0].addWave(512,1,1,0,0);
	PlayList[0].addWave(517,0,0,1,1);
	PlayList[0].addWave(521,1,0,0,1);
	PlayList[0].addWave(525,1,0,1,0);
	PlayList[0].addWave(530,0,1,0,1);
	PlayList[0].addWave(534,1,1,1,0);
	PlayList[0].addWave(539,0,1,1,1);
	PlayList[0].addWave(544,1,1,0,0);
	PlayList[0].addWave(548,0,0,1,1);
	PlayList[0].addWave(552,1,0,0,1);
	PlayList[0].addWave(557,0,1,1,0);
	PlayList[0].addWave(561,1,1,1,0);
	PlayList[0].addWave(566,0,1,1,1);
	PlayList[0].addWave(570,0,0,1,1);
	PlayList[0].addWave(575,1,1,0,0);
	PlayList[0].addWave(579,1,0,0,1);
	PlayList[0].addWave(584,1,0,0,1);
	PlayList[0].addWave(593,1,0,1,0);
	PlayList[0].addWave(602,0,1,0,1);
	PlayList[0].addWave(611,1,0,0,1);
	PlayList[0].addWave(612,0,1,1,0);
	PlayList[0].addWave(614,1,1,0,0);
	PlayList[0].addWave(615,0,0,1,1);
	PlayList[0].addWave(617,1,0,0,1);
	PlayList[0].addWave(618,0,1,1,0);
	PlayList[0].addWave(620,1,0,0,1);
	PlayList[0].addWave(629,1,0,0,1);
	PlayList[0].addWave(638,1,1,1,0);
	PlayList[0].addWave(647,0,1,0,1);
	PlayList[0].addWave(648,1,0,1,0);
	PlayList[0].addWave(650,1,1,0,0);
	PlayList[0].addWave(651,0,0,1,1);
	PlayList[0].addWave(653,1,0,0,1);
	PlayList[0].addWave(654,0,1,1,0);
	PlayList[0].addWave(656,1,0,0,1);
	PlayList[0].addWave(665,0,1,1,0);
	PlayList[0].addWave(674,0,1,0,1);
	PlayList[0].addWave(683,1,0,1,0);
	PlayList[0].addWave(692,0,1,1,0);
	PlayList[0].addWave(700,1,1,0,0);
	PlayList[0].addWave(709,1,1,0,0);
	PlayList[0].addWave(718,0,0,1,1);
	PlayList[0].addWave(727,1,0,0,0);
	PlayList[0].addWave(732,0,1,0,0);
	PlayList[0].addWave(737,1,0,0,0);
	PlayList[0].addWave(741,0,0,1,0);
	PlayList[0].addWave(746,0,0,0,1);
	PlayList[0].addWave(750,0,0,1,0);
	PlayList[0].addWave(755,0,0,0,1);
	PlayList[0].addWave(760,0,1,0,0);
	PlayList[0].addWave(766,1,0,0,0);
	PlayList[0].addWave(771,0,1,0,0);
	PlayList[0].addWave(776,1,0,0,0);
	PlayList[0].addWave(781,0,0,1,0);
	PlayList[0].addWave(786,1,0,0,1);
	PlayList[0].addWave(787,1,0,0,1);
	PlayList[0].addWave(788,1,0,0,1);
	PlayList[0].addWave(789,1,0,0,1);
	PlayList[0].addWave(790,1,0,0,1);
	PlayList[0].addWave(791,1,0,0,1);
	PlayList[0].addWave(792,1,0,0,1);
	PlayList[0].addWave(793,1,0,0,1);
	PlayList[0].addWave(794,1,0,0,1);
	PlayList[0].addWave(795,1,0,0,1);
	PlayList[0].addWave(796,1,0,0,1);
	PlayList[0].addWave(797,1,0,0,1);
	PlayList[0].addWave(798,1,0,0,1);
	PlayList[0].addWave(799,1,0,0,1);
	PlayList[0].addWave(800,1,0,0,1);
	PlayList[0].addWave(801,1,0,0,1);
	PlayList[0].addWave(802,1,0,0,1);
	PlayList[0].addWave(803,1,0,0,1);
	PlayList[0].addWave(804,1,0,0,1);
	PlayList[0].addWave(805,1,0,0,1);
	PlayList[0].addWave(823,1,1,0,0);
	PlayList[0].addWave(826,0,0,1,1);
	PlayList[0].addWave(830,1,0,1,0);
	PlayList[0].addWave(833,0,1,0,1);
	PlayList[0].addWave(836,1,0,0,1);
	PlayList[0].addWave(838,0,1,1,0);
	PlayList[0].addWave(841,1,1,0,0);
	PlayList[0].addWave(844,0,0,1,1);
	PlayList[0].addWave(847,1,0,1,0);
	PlayList[0].addWave(850,0,1,0,1);
	PlayList[0].addWave(854,1,0,0,1);
	PlayList[0].addWave(856,0,1,1,0);
	PlayList[0].addWave(860,1,1,0,0);
	PlayList[0].addWave(863,0,0,1,1);
	PlayList[0].addWave(865,0,1,1,0);
	PlayList[0].addWave(868,1,0,0,1);
	PlayList[0].addWave(871,1,0,0,1);
	PlayList[0].addWave(874,0,1,1,0);
	PlayList[0].addWave(878,1,0,1,0);
	PlayList[0].addWave(880,1,1,0,0);
	PlayList[0].addWave(883,0,1,0,1);
	PlayList[0].addWave(886,0,0,1,1);
	PlayList[0].addWave(889,0,1,1,0);
	PlayList[0].addWave(893,1,1,0,0);
	PlayList[0].addWave(895,0,0,1,1);
	PlayList[0].addWave(898,1,0,0,1);
	PlayList[0].addWave(902,0,1,1,0);
	PlayList[0].addWave(904,1,0,1,0);
	PlayList[0].addWave(908,0,1,0,1);
	PlayList[0].addWave(911,0,0,1,1);
	PlayList[0].addWave(913,1,1,0,0);
	PlayList[0].addWave(916,0,1,1,0);
	PlayList[0].addWave(932,1,0,0,0);
	PlayList[0].addWave(933,1,0,0,0);
	PlayList[0].addWave(934,1,0,0,0);
	PlayList[0].addWave(935,1,0,0,0);
	PlayList[0].addWave(936,1,0,0,0);
	PlayList[0].addWave(937,1,0,0,0);
	PlayList[0].addWave(938,1,0,0,0);
	PlayList[0].addWave(939,1,0,0,0);
	PlayList[0].addWave(940,1,0,0,0);
}

//-----------------LEVEL DESIGN-----------------
var ctx = document.getElementById("canvas").getContext("2d");
//==================MAIN LOOP-------------------
var isPlaying = false;
var Counter = 100;
var Level = 0;
SetupRedLikeRoses();
function PlaySong(value){
	console.log("Playing Song");
	if(PlayList[value].isPlaying){
		isPlaying = false;;
		PlayList[value].isPlaying = false;
		PlayList[value].audio.pause();
	} 
	else{
		isPlaying = true;
		PlayList[value].isPlaying = true;
		PlayList[value].audio.play();
	}	
}
function Restart(){
	Game = new World();
	CurrentScore = 100;
	PlayList[Level].audio.pause();
	PlayList[Level].audio.currentTime = 0;
	PlayList[Level].isPlaying = false;
	isPlaying = false;
	PlayList[Level].clearWave();
	PlayList[Level].progress = 0;
	SetupRedLikeRoses();
}
function Update(){
	if(isPlaying && CurrentScore > 0){
		if(Counter <= 0){
			Counter = 100;
			CheckInput();
			Game.moveEnemy();
			CheckInput();
			if(PlayList[Level].progress < PlayList[Level].maxprogress){
				if(PlayList[Level].waveNo > 0){
					if(PlayList[Level].progress >= PlayList[Level].grimmWave[0].time){
						Game.addEnemy(PlayList[Level].extractWave());
					}
				}
				PlayList[Level].progress++;
			}
		}
	}
	else if(CurrentScore<=0){
		Restart();
	}

	Game.draw();
	Game.update();
	GameInterface.draw();
	GameInterface.updateBeacon(CurrentScore);
	Game.Ruby.draw();
	Game.Weiss.draw();
	Game.Blake.draw();
	Game.Yang.draw();
	Counter -= PlayList[Level].speed;
}
setInterval(Update, 10);